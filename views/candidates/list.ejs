<%- include('../partials/header') %>
<%- include('../partials/sidebar', { user }) %>

<!-- MAIN WRAPPER -->
<div class="p-4 md:p-8 bg-gray-100 min-h-screen md:ml-64">

  <h1 class="text-2xl md:text-3xl font-bold mb-6 text-gray-700">Candidate List</h1>

  <!-- TABLE WRAPPER (for mobile scroll) -->
  <div class="overflow-x-auto bg-white rounded-lg shadow-lg border border-gray-200">

    <table class="min-w-full border-collapse">
      <thead>
        <tr class="bg-blue-100 text-gray-700 text-sm md:text-base">
          <th class="border px-3 md:px-4 py-2 text-left">Name</th>
          <th class="border px-3 md:px-4 py-2 text-left">Email</th>
          <th class="border px-3 md:px-4 py-2 text-left">Job Applied</th>
          <th class="border px-3 md:px-4 py-2 text-center">Actions</th>
        </tr>
      </thead>

      <tbody>
        <% candidates.forEach(candidate => { %>
          <tr class="hover:bg-gray-50 transition text-sm md:text-base">
            <td class="border px-3 md:px-4 py-2 text-gray-800 whitespace-nowrap"><%= candidate.name %></td>
            <td class="border px-3 md:px-4 py-2 text-gray-600 whitespace-nowrap"><%= candidate.email %></td>
            <td class="border px-3 md:px-4 py-2 text-gray-600 whitespace-nowrap">
              <%= candidate.job ? candidate.job.title : 'N/A' %>
            </td>

            <td class="border px-3 md:px-4 py-2 text-center space-x-3 whitespace-nowrap">

              <!-- View -->
              <a href="/candidates/view/<%= candidate.id %>"
                 class="text-blue-500 hover:text-blue-700"
                 title="View candidate details">
                <i class="fa-solid fa-eye text-lg md:text-xl"></i>
              </a>

              <!-- Edit -->
              <a href="/candidates/edit/<%= candidate.id %>"
                 class="text-green-500 hover:text-green-700"
                 title="Edit candidate information">
                <i class="fa-solid fa-pen-to-square text-lg md:text-xl"></i>
              </a>

              <!-- Delete -->
              <a href="/candidates/delete/<%= candidate.id %>"
                 class="text-red-500 hover:text-red-700"
                 title="Delete candidate"
                 onclick="return confirm('Are you sure you want to delete this candidate?');">
                <i class="fa-solid fa-trash text-lg md:text-xl"></i>
              </a>

            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>

  </div>
</div>

<%- include('../partials/footer') %>
